webpackJsonp([0],[function(e,t,n){n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),e.exports=n(12)},,,function(e,t){"use strict";!function(){window.app={},window.app.Renderer={clearContent:function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild)},renderButtons:function(e){var t=document.createDocumentFragment(),n=document.createElement("div");n.classList.add("button-holder"),t.appendChild(n);for(var s=0;s<e.length;s++){for(var i=0;i<e[s].class.length;i++)e[s].node.classList.add(e[s].class[i]);e[s].node.innerHTML=e[s].innerHtml,n.appendChild(e[s].node),e[s].listener&&e[s].node.addEventListener("click",e[s].listener)}document.getElementById("app-body").appendChild(t)}}}()},function(e,t){"use strict";app.Renderer.helpers={transformTime:function(e){var t="",n="";return e/60>=1&&(t=parseInt(e/60)+"h "),0!==parseInt(e%60)&&(n=parseInt(e%60)+"m"),t+n}}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function e(){n(this,e),this.topics={},this.subscribe=function(e,t){this.topics[e]||(this.topics[e]=[]),this.topics[e].push(t)},this.publish=function(e,t){!this.topics[e]||this.topics[e].length<1||this.topics[e].forEach(function(e){e(t||{})})}};!function(){app.EventBus=new s;var e=window.app.EventBus;e.subscribe("login",function(){var e=window.app.Renderer;e.clearContent(document.getElementById("app-body")),e.renderLog()}),e.subscribe("settings",function(){var e=window.app.Renderer;e.clearContent(document.getElementById("app-body")),e.renderHeader(),e.renderTitleSettings(),e.renderSettingsMain();var t=[document.createElement("button"),document.createElement("button")];t=[{node:document.createElement("button"),class:["button-row-2","button-green"],innerHtml:"Save",listener:function(){app.User.saveSettings()}},{node:document.createElement("button"),class:["button-row-2","button-blue"],innerHtml:"Next",listener:function(){app.router.moveTo("tasklist")}}],e.renderButtons(t)}),e.subscribe("settings-2",function(){var e=window.app.Renderer;e.clearContent(document.getElementById("app-body")),e.renderHeader(),e.renderTitleSettings(),e.renderSettingsCategories();var t=[document.createElement("button"),document.createElement("button")];t=[{node:document.createElement("button"),class:["button-row-2","button-blue"],innerHtml:"Back"},{node:document.createElement("button"),class:["button-row-2","button-green"],innerHtml:"Save",listener:function(){User.saveSettings()}}],e.renderButtons(t)}),e.subscribe("reports",function(){var e=window.app.Renderer;e.clearContent(document.getElementById("app-body")),e.renderHeader(),e.renderReports()}),e.subscribe("taskList",function(){var e=window.app.Renderer;e.clearContent(document.getElementById("app-body")),e.renderHeaderDetailed(),e.renderTitleTaskList(),e.renderReportsDaily(),e.renderTitleTaskListGlobal(),e.renderReportsGlobal()}),e.subscribe("goToTimer",function(e){var t=window.app.Renderer;t.clearContent(document.getElementById("app-body")),t.renderHeader(),t.renderTimer(e);var n=[document.createElement("button"),document.createElement("button")];n=[{node:document.createElement("button"),class:["button-row-2","button-red"],innerHtml:"Fail Pomodora",listener:function(){app.EventBusLocal.publish("time-stopped")}},{node:document.createElement("button"),class:["button-row-2","button-green"],innerHtml:"Finish Pomodora",listener:function(){app.EventBusLocal.publish("time-resumed")}}],t.renderButtons(n)}),e.subscribe("no-user",function(){app.EventBus.publish("login")}),e.subscribe("notify",function(e){app.Renderer.addNotification(e)}),e.subscribe("initData",function(){var e=window.app.User;e.getData(e.currentLogin,"tasks",function(t){console.log(t),t||(e.dataSnapShot=JSON.parse(localStorage.getItem("prodApp")).dataSnapShot)}),e.getSettings(e.currentLogin,function(t){console.log(t),t||(e.dataSnapShot=JSON.parse(localStorage.getItem("prodApp")).settings)})})}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function(){function e(){n(this,e),this.currentLogin="",this.settings={},this.trashData=[],this.reportsData={},this.dataSnapShot={}}return s(e,[{key:"getSettings",value:function(e,t){var n=database.ref("users/"+e+"/user_settings");n.on("value",function(e){this.settings=e.val(),t(this.settings)}.bind(this))}},{key:"saveSettings",value:function(){var e=this;database.ref("users/"+this.currentLogin+"/user_settings").set(this.settings).then(function(){app.EventBus.publish("notify",{msg:"Settings saved",type:"info"})}),localStorage.setItem("prodApp",JSON.stringify({dataSnapShot:e.dataSnapShot,settings:e.settings}))}},{key:"getData",value:function(e,t,n){var s=database.ref("users/"+e+"/"+t);s.on("value",function(e){this.dataSnapShot=e.val(),n(this.dataSnapShot)}.bind(this))}},{key:"setData",value:function(e,t,n){database.ref("users/"+e+t).set(n).then(function(){app.EventBus.publish("notify",{msg:"Moved to daily list",type:"info"})})}},{key:"setTaskData",value:function(e,t,n){database.ref("users/"+e+t).set(function(){var e={title:document.getElementById("title-input").value,description:document.getElementById("description-input").value,category:function(){for(var e=document.getElementsByClassName("categories-choose-list")[0],t=0;t<e.children.length;t++)if(e.children[t].firstElementChild.checked)return console.log(e.children[t].firstElementChild),e.children[t].firstElementChild.value.toLowerCase()}(),deadline:function(){var e=document.getElementById("deadline-input").value,t={fullDate:e,month:e.slice(0,e.indexOf(" ")),day:e.slice(e.indexOf(" ")+1,e.indexOf(",")),year:e.slice(e.indexOf(",")+2)};return t}(),estimation:function(){for(var e=document.getElementsByClassName("estimation-range")[0],t=0,n=0;e.children[t];t++)e.children[t].classList.contains("estimated")&&n++;return"estimate-"+n}(),priority:function(){for(var e=document.getElementsByClassName("categories-choose-list")[1],t=0;t<e.children.length;t++)if(e.children[t].firstElementChild.checked)return console.log(e.children[t].firstElementChild),e.children[t].firstElementChild.value.toLowerCase()}()};return console.log(e),e}()).then(function(){app.EventBus.publish("notify",{msg:"Task edited",type:"info"})})}},{key:"deleteTaskData",value:function(e,t){database.ref("users/"+e+t).remove().then(function(){app.EventBus.publish("notify",{msg:"Task deleted",type:"warning"})})}},{key:"updateTasksData",value:function(){var e=this,t="users/"+this.currentLogin+"/tasks",n=database.ref().child(t).push().key;t+="/"+n;var s={title:document.getElementById("title-input").value,description:document.getElementById("title-input").value,category:function(){for(var e=document.getElementsByClassName("categories-choose-list")[0],t=0;t<e.children.length;t++)if(e.children[t].firstElementChild.checked)return console.log(e.children[t].firstElementChild),e.children[t].firstElementChild.value.toLowerCase()}(),deadline:function(){var e=document.getElementById("deadline-input").value,t={fullDate:e,month:e.slice(0,e.indexOf(" ")),day:e.slice(e.indexOf(" ")+1,e.indexOf(",")),year:e.slice(e.indexOf(",")+2)};return t}(),estimation:"estimate-"+document.getElementsByClassName("estimation-range")[0].estimation,priority:function(){for(var e=document.getElementsByClassName("categories-choose-list")[1],t=0;t<e.children.length;t++)if(e.children[t].firstElementChild.checked)return console.log(e.children[t].firstElementChild),e.children[t].firstElementChild.value.toLowerCase()}()};database.ref(t).update(s).then(function(){app.EventBus.publish("notify",{msg:"Task added",type:"success"})}),localStorage.setItem("prodApp",JSON.stringify({dataSnapShot:e.dataSnapShot,settings:e.settings}))}}]),e}();!function(){app.User=new i}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function(){function e(){n(this,e),this.topics={}}return s(e,[{key:"subscribe",value:function(e,t){this.topics[e]||(this.topics[e]=[]),this.topics[e].push(t)}},{key:"publish",value:function(e,t){!this.topics[e]||this.topics[e].length<1||this.topics[e].forEach(function(e){e(t||{})})}},{key:"unsubscribe",value:function(e){delete this.topics[e]}}]),e}();!function(){app.EventBusLocal=new i;var e=window.app.EventBusLocal,t=window.app.User;e.subscribe("trash-drop",function(e){var n=e.e,s=e.context;n.target.classList.contains("category")&&!n.target.classList.contains("toogled")&&n.target.parentNode.classList.contains("trash")?(n.target.innerHTML="&#xe910;",n.target.classList.add("toogled"),s.model.checkTrashBuffer(n.target.parentNode.getAttribute("key"))&&(t.trashData.push(n.target.parentNode.getAttribute("key")),t.trashData.length>0?(document.getElementsByClassName("trash-counter")[0].style.display="inline-block",document.getElementsByClassName("trash-counter")[0].innerHTML=t.trashData.length):document.getElementsByClassName("trash-counter")[0].style.display="none",console.log(t.trashData))):n.target.classList.contains("toogled")&&n.target.parentNode.classList.contains("trash")&&(n.target.innerHTML="&#xe912;",n.target.classList.remove("toogled"),t.trashData.splice(t.trashData.indexOf(n.target.parentNode.getAttribute("key")),1),t.trashData.length>0?(document.getElementsByClassName("trash-counter")[0].style.display="inline-block",document.getElementsByClassName("trash-counter")[0].innerHTML=t.trashData.length):document.getElementsByClassName("trash-counter")[0].style.display="none",console.log(t.trashData))}),e.subscribe("trash-check-all",function(e){for(var n=document.getElementsByClassName("task"),s=0;s<n.length;s++)if(n[s].parentNode.classList.contains(e)){n[s].firstElementChild.innerHTML="&#xe910;",n[s].firstElementChild.classList.add("toogled");var i=n[s].getAttribute("key");t.trashData.indexOf(i)===-1&&(t.trashData.push(i),t.trashData.length>0?(document.getElementsByClassName("trash-counter")[0].style.display="inline-block",document.getElementsByClassName("trash-counter")[0].innerHTML=t.trashData.length):document.getElementsByClassName("trash-counter")[0].style.display="none",console.log(t.trashData))}}),e.subscribe("trash-uncheck-all",function(e){for(var n=document.getElementsByClassName("task"),s=0;s<n.length;s++)if(n[s].parentNode.classList.contains(e)){n[s].firstElementChild.innerHTML="&#xe912;",n[s].firstElementChild.classList.remove("toogled");var i=n[s].getAttribute("key");console.log(i),t.trashData.indexOf(i)!==-1&&(t.trashData.splice(t.trashData.indexOf(i),1),t.trashData.length>0?(document.getElementsByClassName("trash-counter")[0].style.display="inline-block",document.getElementsByClassName("trash-counter")[0].innerHTML=t.trashData.length):document.getElementsByClassName("trash-counter")[0].style.display="none",console.log(t.trashData))}}),e.subscribe("trash-refresh",function(e){document.getElementsByClassName("trash-counter")[0].innerHTML=t.trashData.length,document.getElementsByClassName("trash-counter")[0].style.display="none",t.trashData=[]}),e.subscribe("trash-on",function(e){var t=document.getElementsByClassName("task");e.classList.add("active");for(var n=0;n<t.length;n++)t[n].classList.add("trash");var s=document.getElementsByClassName("left-side");for(n=0;n<s.length;n++)s[n].classList.remove("hidden")}),e.subscribe("trash-off",function(e){var t=document.getElementsByClassName("task");e.classList.remove("active");for(var n=0;n<t.length;n++)t[n].classList.remove("trash");var s=document.getElementsByClassName("left-side");for(n=0;n<s.length;n++)s[n].classList.add("hidden")})}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function(){function e(){n(this,e),this.routes={login:{module:"no-user",name:"Login",url:"login"},pomodoras:{module:"settings",name:"Pomodoras",url:"settings-pomodoras"},categories:{module:"settings-2",name:"Categories",url:"settings-categories"},tasklist:{module:"taskList",name:"Task List",url:"task-list"},reports:{module:"reports",name:"Reports",url:"report"},timer:{module:"goToTimer",name:"Timer",url:"timer"}},this.defaultState="tasklist",this.currentState="tasklist"}return s(e,[{key:"moveTo",value:function(e,t){var n=this.routes[e];history.pushState({path:e},n.name,n.url),app.EventBus.publish(n.module,t),this.currentState=e,console.log(history)}},{key:"replaceState",value:function(e){var t=this.routes[e];return history.replaceState({path:e},t.name,t.url),app.EventBus.publish(t.module),console.log(history),this}},{key:"resetState",value:function(){return history.replaceState("random string","random string","/random string"),this}},{key:"bind",value:function(){var e=this;window.addEventListener("popstate",function(t){console.log(t.state),app.EventBus.publish(e.routes[t.state.path].module)})}}]),e}();!function(){app.router=new i,app.router.bind()}()},function(e,t){"use strict";!function(e){e.fn.tips=function(t,n){var s,i,o,a=e(this);n?(s=85,n=90):(s=0,n=0),e(".tipp").length?i=e(".tipp"):(i=e('<div class="tipp"><span class="triangle"></span><p class="tip-text"></p></div>'),o=i.find(".triangle"),e("body").append(i),i.css({position:"absolute",width:"113px",padding:"8px 3px",backgroundColor:"#cedeea",zIndex:9999999999,color:"#3c5162",borderRadius:"3px",boxSizing:"border-box",textAlign:"center",display:"none",font:"13px HelveticaBold, sans-serif",fontWeight:"bold"}),o.css({content:"",display:"block",width:"0",height:"0",position:"absolute",borderLeft:"5px solid ",borderRight:"5px solid ",borderBottom:"5px solid ",borderColor:"transparent",borderBottomColor:"#cedeea",left:"8px",top:"-5px"})),o=i.find(".triangle");var r=i.find(".tip-text"),l={mouseEnterListener:function(e){e.target!==i&&e.target!==o&&(i.css({top:e.pageY+12+"px",left:e.pageX-10-n+"px",display:"block"}),o.css({left:8+s+"px"}),r.html(t)),a.mousemove(function(e){e.target!==i&&e.target!==o&&(i.css({top:e.pageY+30+"px",left:e.pageX-10-n+"px"}),o.css({left:"8px"+s}))})},offVision:function(e){a.off("mousemove"),i.css({display:"none"})}};return a.mouseenter(l.mouseEnterListener),a.mouseleave(l.offVision),a.click(l.offVision),this},e.fn.accordeon=function(){var t=e(this),n=t.find(".accordeon-head"),s=function(t){var n=e("#"+e(t.target).attr("linked_block"));n.is(":visible")?n.slideUp("slow"):n.slideDown("slow")};return t.off("click",s),t.on("click",n,s),this}}(window.$)},function(e,t){"use strict";!function(){window.Notifications={spawnNotification:function(e){if("Notification"in window)if("granted"===Notification.permission){var t={body:e.body,icon:e.icon},n=new Notification(e.title,t);setTimeout(n.close.bind(n),5e3)}else"denied"!==Notification.permission&&Notification.requestPermission(function(t){if("granted"===t){var n={body:e.body,icon:e.icon},s=new Notification(e.title,n);setTimeout(s.close.bind(s),5e3)}});else alert("This browser does not support system notifications")}}}()},function(e,t){"use strict";window.addEventListener("offline",function(e){Notifications.spawnNotification({body:"gone offline",title:"msg",icon:"Global/img/question-mark.png"}),app.EventBus.publish("notify",{msg:"Gone offline",type:"fail"})}),window.addEventListener("online",function(e){Notifications.spawnNotification({body:"gone online",title:"msg",icon:"Global/img/question-mark.png"}),app.EventBus.publish("notify",{msg:"Gone online",type:"success"})})},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){this.view=e,this.eBus=t}var o=n(13),a=s(o);i.prototype={init:function(){this.eBus.subscribe("auth",this.view.auth),this.eBus.subscribe("logOut",this.view.logOut),this.eBus.publish("login"),firebase.auth().onAuthStateChanged(function(e){var t=window.app.EventBus,n=window.app.router,s=window.app.User;if(e||n.replaceState("login"),e){s.currentLogin=e.email.slice(0,e.email.search("@"));var i=location.pathname.slice(1);for(var o in n.routes)n.routes.hasOwnProperty(o)&&i===n.routes[o].url&&(i=o);n.routes[i]&&"login"!==i&&"timer"!==i?n.replaceState(n.currentState).moveTo(i):n.resetState().replaceState(n.defaultState),t.publish("initData")}})}},document.addEventListener("DOMContentLoaded",function(){app.loginCtrl=new i(new a.default(app.EventBus),app.EventBus),app.loginCtrl.init()})},function(e,t){"use strict";function n(e){this.eBus=e}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.auth=function(e){var t=document.getElementById("name_input").value,n=document.getElementById("pw_input").value;firebase.auth().signInWithEmailAndPassword(t,n).catch(function(e){for(var t=document.getElementsByClassName("invalid_msg"),n=0;n<t.length;n++)t[n].style.display="block";app.EventBus.publish("notify",{msg:"Invalid login/password",type:"fail"})})},n.prototype.logOut=function(){firebase.auth().signOut()},t.default=n}]);