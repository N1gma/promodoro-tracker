webpackJsonp([0],[function(e,t,n){n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),e.exports=n(15)},,,function(e,t){"use strict";!function(){window.app={},window.app.Renderer={clearContent:function(e,t){if(t)e.parentNode.removeChild(e);else for(;e.firstElementChild;)e.removeChild(e.firstElementChild);app.EventBusLocalTimer.timer&&clearInterval(app.EventBusLocalTimer.timer.timeout)},renderButtons:function(e,t){var n=document.createDocumentFragment(),i=document.createElement("div");t?i.classList.add(t):i.classList.add("button-holder"),n.appendChild(i);for(var s=0;s<e.length;s++){for(var o=0;o<e[s].class.length;o++)e[s].node.classList.add(e[s].class[o]);e[s].node.innerHTML=e[s].innerHtml,i.appendChild(e[s].node),e[s].listener&&e[s].node.addEventListener("click",e[s].listener)}document.getElementById("app-body").appendChild(n)}}}()},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};app.Renderer.helpers={transformTime:function(e){var t="",n="";return e/60>=1&&(t=parseInt(e/60)+"h "),0!==parseInt(e%60)&&(n=parseInt(e%60)+"m"),t+n},arrayToObject:function(e){for(var t={},n=0;n<e.length;n++)t[n]=e[n];return t},objectToArray:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},getCss:function(e){var t=document.createElement("style");return t.innerHTML=e[0][1],t},throttle:function(e,t,n){t||(t=250);var i,s;return function(){var o=n||this,r=+new Date,a=arguments;i&&r<i+t?(clearTimeout(s),s=setTimeout(function(){i=r,e.apply(o,a)},t)):(i=r,e.apply(o,a))}},ifSolvedThen:function(e,t){app.EventBusLocal.resolvedCount=0;var n=setInterval(function(){var i=app.EventBusLocal.resolvedCount;(e<=i||!navigator.onLine)&&(app.EventBusLocal.resolvedCount=0,t(),clearInterval(n))},100)},isEmptyObj:function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!==("undefined"==typeof e?"undefined":n(e)))return!0;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function e(){n(this,e),this.topics={},this.subscribe=function(e,t){return this.topics[e]||(this.topics[e]=[]),this.topics[e].push(t),this},this.publish=function(e,t){!this.topics[e]||this.topics[e].length<1||this.topics[e].forEach(function(e){e(t||{})})}};!function(){app.EventBus=new i;var e=window.app.EventBus;e.subscribe("login",function(){var e=window.app.Renderer;e.clearContent(document.getElementById("app-body")),e.renderLog()}).subscribe("settings",function(){var e=window.app.Renderer;e.clearContent(document.getElementById("app-body")),e.renderHeader(),e.renderTitleSettings(),e.renderSettingsMain();var t=[document.createElement("button"),document.createElement("button")];t=[{node:document.createElement("button"),class:["button-row-2","button-green"],innerHtml:"Save",listener:function(){app.User.saveSettings()}},{node:document.createElement("button"),class:["button-row-2","button-blue"],innerHtml:"Next",listener:function(){app.router.moveTo("tasklist")}}],e.renderButtons(t)}).subscribe("settings-2",function(){var e=window.app.Renderer;e.clearContent(document.getElementById("app-body")),e.renderHeader(),e.renderTitleSettings(),e.renderSettingsCategories();var t=[document.createElement("button"),document.createElement("button")];t=[{node:document.createElement("button"),class:["button-row-2","button-blue"],innerHtml:"Back"},{node:document.createElement("button"),class:["button-row-2","button-green"],innerHtml:"Save",listener:function(){User.saveSettings()}}],e.renderButtons(t)}).subscribe("reports",function(){var e=window.app.Renderer;e.clearContent(document.getElementById("app-body")),e.renderHeader(),e.renderReports()}).subscribe("taskList",function(){var e=window.app.Renderer;e.clearContent(document.getElementById("app-body")),e.renderHeaderDetailed(),e.renderTitleTaskList(),e.renderReportsDaily(),e.renderTitleTaskListGlobal(),e.renderReportsGlobal()}).subscribe("goToTimer",function(e){var t=window.app.Renderer;app.EventBusLocalTimer.topics={},t.clearContent(document.getElementById("app-body")),t.renderHeader(),t.renderTimer(e)}).subscribe("waitOverlay",function(){app.Renderer.waitOverlay()}).subscribe("no-user",function(){app.EventBus.publish("login")}).subscribe("notify",function(e){e.singleton?app.Renderer.addSingletonNotification(e):app.Renderer.addNotification(e)}).subscribe("initData",function(){var e=window.app.User;e.getData(e.currentLogin,"tasks",function(t){t||(e.dataSnapShot=JSON.parse(localStorage.getItem("prodApp")).dataSnapShot)}),e.getSettings(e.currentLogin,function(t){t||(e.dataSnapShot=JSON.parse(localStorage.getItem("prodApp")).settings)})})}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){n(this,e),this.currentLogin="",this.settings={},this.trashData=[],this.reportsData={},this.dataSnapShot={}}return i(e,[{key:"getSettings",value:function(e,t){var n=database.ref("users/"+e+"/user_settings");n.on("value",function(e){return this.settings=e.val(),t?void t(this.settings):this.settings}.bind(this))}},{key:"saveSettings",value:function(){var e=this;database.ref("users/"+this.currentLogin+"/user_settings").set(this.settings).then(function(){app.EventBus.publish("notify",{msg:"Settings saved",type:"info"})}),localStorage.setItem("prodApp",JSON.stringify({dataSnapShot:e.dataSnapShot,settings:e.settings}))}},{key:"getData",value:function(e,t,n){var i=database.ref("users/"+e+"/"+t);i.on("value",function(e){this.dataSnapShot=e.val(),n(this.dataSnapShot)}.bind(this))}},{key:"setData",value:function(e,t,n){database.ref("users/"+e+t).set(n).then(function(){app.EventBus.publish("notify",{msg:"Moved to daily list",type:"info"})})}},{key:"saveData",value:function(e,t,n){database.ref("users/"+e+t).update(n)}},{key:"setTaskData",value:function(e,t,n){database.ref("users/"+e+t).set(function(){return{title:document.getElementById("title-input").value,description:document.getElementById("description-input").value,category:function(){for(var e=document.getElementsByClassName("categories-choose-list")[0],t=0;t<e.children.length;t++)if(e.children[t].firstElementChild.checked)return e.children[t].firstElementChild.value.toLowerCase()}(),deadline:function(){var e=document.getElementById("deadline-input").value,t={fullDate:e,month:e.slice(0,e.indexOf(" ")),day:e.slice(e.indexOf(" ")+1,e.indexOf(",")),year:e.slice(e.indexOf(",")+2)};return t}(),estimation:function(){for(var e=document.getElementsByClassName("estimation-range")[0],t=0,n=0;e.children[t];t++)e.children[t].classList.contains("estimated")&&n++;return"estimate-"+n}(),priority:function(){for(var e=document.getElementsByClassName("categories-choose-list")[1],t=0;t<e.children.length;t++)if(e.children[t].firstElementChild.checked)return e.children[t].firstElementChild.value.toLowerCase()}()}}()).then(function(){app.EventBus.publish("notify",{msg:"Task edited",type:"info"})})}},{key:"deleteTaskData",value:function(e,t){database.ref("users/"+e+t).remove().then(function(){app.EventBus.publish("notify",{msg:"Task deleted",type:"warning"})})}},{key:"updateTasksData",value:function(){var e=this,t="users/"+this.currentLogin+"/tasks",n=database.ref().child(t).push().key;t+="/"+n;var i={title:document.getElementById("title-input").value,description:document.getElementById("description-input").value,category:function(){for(var e=document.getElementsByClassName("categories-choose-list")[0],t=0;t<e.children.length;t++)if(e.children[t].firstElementChild.checked)return e.children[t].firstElementChild.value.toLowerCase()}(),deadline:function(){var e=document.getElementById("deadline-input").value,t={fullDate:e,month:e.slice(0,e.indexOf(" ")),day:e.slice(e.indexOf(" ")+1,e.indexOf(",")),year:e.slice(e.indexOf(",")+2)};return t}(),estimation:"estimate-"+document.getElementsByClassName("estimation-range")[0].estimation,priority:function(){for(var e=document.getElementsByClassName("categories-choose-list")[1],t=0;t<e.children.length;t++)if(e.children[t].firstElementChild.checked)return e.children[t].firstElementChild.value.toLowerCase()}()};database.ref(t).update(i).then(function(){app.EventBus.publish("notify",{msg:"Task added",type:"success"})}),localStorage.setItem("prodApp",JSON.stringify({dataSnapShot:e.dataSnapShot,settings:e.settings}))}}]),e}();!function(){app.User=new s}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){n(this,e),this.topics={},this.resolvedCount=0}return i(e,[{key:"subscribe",value:function(e,t){return this.topics[e]||(this.topics[e]=[]),this.topics[e].push(t),this}},{key:"publish",value:function(e,t){!this.topics[e]||this.topics[e].length<1||this.topics[e].forEach(function(e){e(t||{})})}},{key:"unsubscribe",value:function(e){delete this.topics[e]}}]),e}();!function(e){e.EventBusLocal=new s;var t=e.EventBusLocal,n=(e.Renderer.helpers.ifSolvedThen,e.User);t.subscribe("trash-drop",function(e){var t=e.e,i=e.context;t.target.classList.contains("category")&&!t.target.classList.contains("toogled")&&t.target.parentNode.classList.contains("trash")?(t.target.innerHTML="&#xe910;",t.target.classList.add("toogled"),i.model.checkTrashBuffer(t.target.parentNode.getAttribute("key"))&&(n.trashData.push(t.target.parentNode.getAttribute("key")),n.trashData.length>0?(document.getElementsByClassName("trash-counter")[0].style.display="inline-block",document.getElementsByClassName("trash-counter")[0].innerHTML=n.trashData.length):document.getElementsByClassName("trash-counter")[0].style.display="none")):t.target.classList.contains("toogled")&&t.target.parentNode.classList.contains("trash")&&(t.target.innerHTML="&#xe912;",t.target.classList.remove("toogled"),n.trashData.splice(n.trashData.indexOf(t.target.parentNode.getAttribute("key")),1),n.trashData.length>0?(document.getElementsByClassName("trash-counter")[0].style.display="inline-block",document.getElementsByClassName("trash-counter")[0].innerHTML=n.trashData.length):document.getElementsByClassName("trash-counter")[0].style.display="none")}).subscribe("trash-check-all",function(e){for(var t=document.getElementsByClassName("task"),i=0;i<t.length;i++)if(t[i].parentNode.classList.contains(e)){t[i].firstElementChild.innerHTML="&#xe910;",t[i].firstElementChild.classList.add("toogled");var s=t[i].getAttribute("key");n.trashData.indexOf(s)===-1&&(n.trashData.push(s),n.trashData.length>0?(document.getElementsByClassName("trash-counter")[0].style.display="inline-block",document.getElementsByClassName("trash-counter")[0].innerHTML=n.trashData.length):document.getElementsByClassName("trash-counter")[0].style.display="none")}}).subscribe("trash-uncheck-all",function(e){for(var t=document.getElementsByClassName("task"),i=0;i<t.length;i++)if(t[i].parentNode.classList.contains(e)){t[i].firstElementChild.innerHTML="&#xe912;",t[i].firstElementChild.classList.remove("toogled");var s=t[i].getAttribute("key");n.trashData.indexOf(s)!==-1&&(n.trashData.splice(n.trashData.indexOf(s),1),n.trashData.length>0?(document.getElementsByClassName("trash-counter")[0].style.display="inline-block",document.getElementsByClassName("trash-counter")[0].innerHTML=n.trashData.length):document.getElementsByClassName("trash-counter")[0].style.display="none")}}).subscribe("trash-refresh",function(e){document.getElementsByClassName("trash-counter")[0].innerHTML=n.trashData.length,document.getElementsByClassName("trash-counter")[0].style.display="none",n.trashData=[]}).subscribe("trash-on",function(e){var t=document.getElementsByClassName("task");e.classList.add("active");for(var n=0;n<t.length;n++)t[n].classList.add("trash");var i=document.getElementsByClassName("left-side");for(n=0;n<i.length;n++)i[n].classList.remove("hidden")}).subscribe("trash-off",function(e){var t=document.getElementsByClassName("task");e.classList.remove("active");for(var n=0;n<t.length;n++)t[n].classList.remove("trash");var i=document.getElementsByClassName("left-side");for(n=0;n<i.length;n++)i[n].classList.add("hidden")}).subscribe("actionResolved",function(){t.resolvedCount++})}(window.app)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){n(this,e),this.topics={}}return i(e,[{key:"subscribe",value:function(e,t){return this.topics[e]||(this.topics[e]=[]),this.topics[e].push(t),this}},{key:"publish",value:function(e,t){!this.topics[e]||this.topics[e].length<1||this.topics[e].forEach(function(e){e(t||{})})}},{key:"unsubscribe",value:function(e){delete this.topics[e]}}]),e}();!function(){app.EventBusLocalTimer=new s}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){n(this,e),this.routes={login:{module:"no-user",name:"Login",url:"login"},pomodoras:{module:"settings",name:"Pomodoras",url:"settings-pomodoras"},categories:{module:"settings-2",name:"Categories",url:"settings-categories"},tasklist:{module:"taskList",name:"Task List",url:"task-list"},reports:{module:"reports",name:"Reports",url:"report"},timer:{module:"goToTimer",name:"Timer",url:"timer"}},this.defaultState="tasklist",this.currentState="tasklist"}return i(e,[{key:"moveTo",value:function(e,t){var n=this.routes[e];history.pushState({path:e},n.name,n.url),app.EventBus.publish(n.module,t),this.currentState=e}},{key:"replaceState",value:function(e){var t=this.routes[e];return history.replaceState({path:e},t.name,t.url),app.EventBus.publish(t.module),this.currentState=e,this}},{key:"resetState",value:function(){return history.replaceState("random string","random string","/random string"),this}},{key:"bind",value:function(){var e=this;window.addEventListener("popstate",function(t){"login"!==e.currentState?app.EventBus.publish(e.routes[t.state.path].module):app.router.replaceState("login")})}}]),e}();!function(){app.router=new s,app.router.bind()}()},function(e,t){"use strict";!function(e){e.fn.tips=function(t,n){var i,s,o,r=e(this);app.Renderer.helpers.throttle;n?(i=85,n=90):(i=0,n=0),e(".tipp").length?s=e(".tipp"):(s=e('<div class="tipp"><span class="triangle"></span><p class="tip-text"></p></div>'),o=s.find(".triangle"),e("body").append(s),s.css({position:"absolute",width:"113px",padding:"8px 3px",backgroundColor:"#cedeea",zIndex:9999999999,color:"#3c5162",borderRadius:"3px",boxSizing:"border-box",textAlign:"center",display:"none",font:"13px HelveticaBold, sans-serif",fontWeight:"bold"}),o.css({content:"",display:"block",width:"0",height:"0",position:"absolute",borderLeft:"5px solid ",borderRight:"5px solid ",borderBottom:"5px solid ",borderColor:"transparent",borderBottomColor:"#cedeea",left:"8px",top:"-5px"})),o=s.find(".triangle");var a=s.find(".tip-text"),l={mouseEnterListener:function(e){e.target!==s&&e.target!==o&&(s.css({top:e.pageY+12+"px",left:e.pageX-10-n+"px",display:"block"}),o.css({left:8+i+"px"}),a.html(t)),r.mousemove(function(e){e.target!==s&&e.target!==o&&(s.css({top:e.pageY+30+"px",left:e.pageX-10-n+"px"}),o.css({left:"8px"+i}))})},offVision:function(e){r.off("mousemove"),s.css({display:"none"})}};return r.mouseenter(l.mouseEnterListener),r.mouseleave(l.offVision),r.click(l.offVision),this},e.fn.accordeon=function(){var t=e(this),n=t.find(".accordeon-head"),i=function(){var t=e("#"+n.attr("linked_block"));t.is(":visible")?t.slideUp("slow"):t.slideDown("slow")};return n.off("click",i),n.on("click",i),this}}(window.$)},function(e,t){"use strict";!function(){window.Notifications={spawnNotification:function(e){if("Notification"in window)if("granted"===Notification.permission){var t={body:e.body,icon:e.icon},n=new Notification(e.title,t);setTimeout(n.close.bind(n),5e3)}else"denied"!==Notification.permission&&Notification.requestPermission(function(t){if("granted"===t){var n={body:e.body,icon:e.icon},i=new Notification(e.title,n);setTimeout(i.close.bind(i),5e3)}});else alert("This browser does not support system notifications")}}}()},function(e,t){"use strict";window.addEventListener("offline",function(e){Notifications.spawnNotification({body:"gone offline",title:"msg",icon:"Global/img/question-mark.png"}),app.EventBus.publish("notify",{msg:"Gone offline",type:"fail"})}),window.addEventListener("online",function(e){Notifications.spawnNotification({body:"gone online",title:"msg",icon:"Global/img/question-mark.png"}),app.EventBus.publish("notify",{msg:"Gone online",type:"success"})})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e){this.view=e}var o=n(14),r=i(o);s.prototype={init:function(){var e=app.EventBus,t=app.router,n=app.User;e.subscribe("auth",this.view.auth),e.subscribe("logOut",this.view.logOut),firebase.auth().onAuthStateChanged(function(e){if(e||t.resetState().replaceState("login"),e){app.EventBus.publish("waitOverlay"),n.currentLogin=e.email.slice(0,e.email.search("@"));var i=location.pathname.slice(1);for(var s in t.routes)t.routes.hasOwnProperty(s)&&i===t.routes[s].url&&(i=s);t.routes[i]&&"login"!==i&&"timer"!==i?t.replaceState(t.currentState).moveTo(i):t.resetState().replaceState(t.defaultState)}})}},document.addEventListener("DOMContentLoaded",function(){app.loginCtrl=new s(new r.default),app.loginCtrl.init()})},function(e,t){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.auth=function(e){var t=document.getElementById("name_input").value,n=document.getElementById("pw_input").value;firebase.auth().signInWithEmailAndPassword(t,n).catch(function(e){for(var t=document.getElementsByClassName("invalid_msg"),n=0;n<t.length;n++)t[n].style.display="block";app.EventBus.publish("notify",{msg:"Invalid login/password",type:"fail"})})},n.prototype.logOut=function(){firebase.auth().signOut()},t.default=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){var t=this;n(this,e),this.results=[],this.iteration=0,this.valid=!0,this.defaultFns={success:function(e){e.removeClass?e.removeClass("error-field"):e.classList.remove("error-field")},error:function(e){e.addClass?e.addClass("error-field"):e.classList.add("error-field")}},this.methods={empty:function(e){0===e.val.trim().length&&(t.results[t.iteration].push(e.title+" can't be empty"),t.valid=!1)},maxLength:function(e,n){e.val.length>n.len&&(t.results[t.iteration].push(e.title+" maximum of "+n.len+" characters"),t.valid=!1)},checked:function(e){var n=!1;if(Array.isArray(e.node))for(var i=0;i<e.node.length;i++)e.node[i].checked&&(n=!0);else e.node.checked&&(n=!0);n||(t.results[t.iteration].push(e.title+" checkbox must be checked"),t.valid=!1)},containClass:function(e,n){var i=!1;if(Array.isArray(e.node))for(var s=0;s<e.node.length;s++)e.node[s].classList.contains(n.askingClass)&&(i=!0);else e.node.classList.contains(n.askingClass)&&(i=!0);i||(t.results[t.iteration].push("checkbox must be checked"),t.valid=!1)}}}return s(e,[{key:"validate",value:function(e){for(var t=0;t<e.length;t++){this.results.push([]),this.createConfig(e[t]),this.valid=!0;for(var n=this.conf.options,s=this.conf.target,o=0;o<n.length;o++)"object"===i(this.conf.options[o])?this.methods[n[o].name](s,n[o].params):this.methods[n[o]](s);this.conf.preventAction||(this.valid?this.conf.success(s.origin):this.conf.error(s.origin)),this.iteration++}return this.results}},{key:"createConfig",value:function(e){var t=this;this.conf={target:{val:e.target.value,node:e.target},options:e.options,success:e.success||t.defaultFns.success,error:e.error||t.defaultFns.error,preventAction:e.preventAction||!1},this.conf.target.origin=e.origin||this.conf.target.node,this.conf.target.origin.previousElementSibling&&(this.conf.target.title=this.conf.target.origin.previousElementSibling.innerText)}}]),e}();t.default=o}]);